                                                 ğŸ› ï¸ Terraform Key Concepts â€“ Quick Notes

âœ… 1. When to Use terraform refresh

When resources have been changed outside of Terraform, and you want the state file to reflect those changes without modifying the configuration files.

terraform refresh
âœ… 2. When to Use terraform import

When resources were created manually (e.g., in AWS, Azure) or by another tool, and you now want Terraform to manage them.


terraform import <resource_type>.<resource_name> <real_world_resource_id>

terraform import aws_instance.web i-1234567890abcdef0

ğŸŒ What is Terraform?

Terraform is an open-source Infrastructure as Code (IaC) tool.

It helps to create and manage infrastructure using a high-level configuration language called HCL (HashiCorp Configuration Language).

ğŸ”§ Terraform Basic Commands

ğŸ”¹ terraform init

Initializes the environment in the current directory.

Downloads required providers and sets up the backend.

ğŸ”¹ terraform plan

Shows what changes will be made to the infrastructure.

Helps you review create/update/delete actions before applying.

ğŸ”¹ terraform apply

Applies the planned changes to real infrastructure.

Creates or updates resources based on .tf files and the plan.

ğŸ”Œ Terraform Provider vs Resource

ğŸ”¹ Provider

A plugin that interacts with cloud APIs (AWS, Azure, GCP, etc.)

Tells Terraform which platform to work with.

âœ… Example:

provider "azurerm" {}  # Talks to Azure API

ğŸ”¹ Resource

The actual component you create/update/delete in the cloud.

Example: VM, subnet, AKS cluster, S3 bucket, etc.

âœ… Example:

resource "azurerm_virtual_machine" "vm1" {
  ...
}

ğŸ—‚ï¸ Workspace

Manages multiple state files using the same Terraform configuration.

Useful for environments like dev, test, and prod.

âœ… Example:

terraform workspace new dev

ğŸ“¦ Module

A reusable block of Terraform code. Helps organize and reuse infrastructure logic.

ğŸ§  Types of Modules:

Root Module â€“ The main config in your current directory.

Child Module â€“ A reusable module (local or from Terraform Registry).

ğŸ“„ Terraform State
Tracks resources managed by Terraform.

Stores metadata about infrastructure in a file (terraform.tfstate).

âœ… By default, state is stored locally.

ğŸ‘‰ For team collaboration, store the state remotely (e.g., Amazon S3, Azure Blob).

ğŸ§® Terraform Variables
Variables allow you to parameterize your config instead of hardcoding values.

variable "region" {
  default = "us-east-1"
}

ğŸ“¤ Terraform Outputs

Used to display important info after deployment, like public IP or DNS name.


output "vm_ip" {
  value = azurerm_public_ip.example.ip_address
}
ğŸ”„ Data Sources

Allow you to fetch existing infrastructure from external providers without creating new resources.

âœ… Example: Get existing VNet, existing AMI ID, etc.

ğŸ§¾ Locals

Named values you define in your config to make it cleaner and reusable.


locals {
  instance_type = "t2.micro"
  environment   = "dev"
}

